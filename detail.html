<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Place Detail</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 1rem;
    }
    .card {
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 1rem;
      max-width: 600px;
      margin: auto;
      box-shadow: 2px 2px 10px rgba(0,0,0,0.1);
    }
    img {
      width: 100%;
      border-radius: 10px;
    }
    h2 {
      margin-top: 0.5rem;
    }
  </style>
</head>
<body>
  <h1>Place Details</h1>
  <div id="place-container"></div>

  <script>

    class Place {
      constructor(name, location, description, image) {
        this.name = name;
        this.location = location;
        this.description = description;
        this.image = image;
      }

      render(containerId = 'place-container') {
        const container = document.getElementById(containerId);
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <img src="${this.image}" alt="${this.name}" />
          <h2>${this.name}</h2>
          <p><strong>Location:</strong> ${this.location}</p>
          <p>${this.description}</p>
        `;
        container.appendChild(card);
      }
    }

    class Restaurant extends Place {
      constructor(name, location, description, image, cuisine) {
        super(name, location, description, image);
        this.cuisine = cuisine;
      }

      render(containerId = 'place-container') {
        const container = document.getElementById(containerId);
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <img src="${this.image}" alt="${this.name}" />
          <h2>${this.name} <span style="font-size: 0.8em;">(${this.cuisine})</span></h2>
          <p><strong>Location:</strong> ${this.location}</p>
          <p>${this.description}</p>
        `;
        container.appendChild(card);
      }
    }

    class Hotel extends Place {
      constructor(name, location, description, image, stars) {
        super(name, location, description, image);
        this.stars = stars;
      }

      render(containerId = 'place-container') {
        const container = document.getElementById(containerId);
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <img src="${this.image}" alt="${this.name}" />
          <h2>${this.name} ‚≠ê ${this.stars}</h2>
          <p><strong>Location:</strong> ${this.location}</p>
          <p>${this.description}</p>
        `;
        container.appendChild(card);
      }
    }

    class Attraction extends Place {
      constructor(name, location, description, image, openHours) {
        super(name, location, description, image);
        this.openHours = openHours;
      }

      render(containerId = 'place-container') {
        const container = document.getElementById(containerId);
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <img src="${this.image}" alt="${this.name}" />
          <h2>${this.name}</h2>
          <p><strong>Location:</strong> ${this.location}</p>
          <p>${this.description}</p>
          <p><strong>Open Hours:</strong> ${this.openHours}</p>
        `;
        container.appendChild(card);
      }
    }

    const examplePlaceData = {
      type: "restaurant",
      name: "Choon Hui Cafe",
      location: "Kuching",
      description: "Famous for Sarawak Laksa and traditional dishes.",
      image: "https://source.unsplash.com/600x400/?restaurant",
      cuisine: "Chinese"
    };

    function loadPlace(data) {
      let placeObj;

      try {
        switch (data.type) {
          case "restaurant":
            placeObj = new Restaurant(data.name, data.location, data.description, data.image, data.cuisine);
            break;
          case "hotel":
            placeObj = new Hotel(data.name, data.location, data.description, data.image, data.stars || 3);
            break;
          case "attraction":
            placeObj = new Attraction(data.name, data.location, data.description, data.image, data.openHours || "9AM - 6PM");
            break;
          default:
            placeObj = new Place(data.name, data.location, data.description, data.image);
        }

        placeObj.render(); // Polymorphic method call
      } catch (err) {
        console.error("Failed to load place:", err);
        const container = document.getElementById('place-container');
        container.innerHTML = `<p>Sorry, something went wrong while loading place details.</p>`;
      }
    }

    // Simulate loading the place
    loadPlace(examplePlaceData);
  </script>
</body>
</html>
